<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CGPA Calculator</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background-color: #1f1f1f; /* Background color */
            color: #ffffff; /* Text color */
        }
        table {
            margin: 20px 0;
            border-collapse: collapse;
            width: 100%;
        }
        th, td {
            border: 1px solid #555; /* Table border color */
            padding: 8px;
            text-align: center;
        }
        th {
            background-color: #3f3f3f; /* Header background color */
        }
        input[type="text"], input[type="number"], select {
            width: 80%;
            padding: 8px;
            margin: 5px 0;
            background-color: #2a2a2a; /* Input background color */
            color: #ffffff; /* Input text color */
            border: 1px solid #444; /* Input border color */
        }
        button {
            padding: 10px 15px;
            margin-top: 10px;
            background-color: #28a745; /* Button color */
            color: white; /* Button text color */
            border: none;
            cursor: pointer;
        }
        button:hover {
            background-color: #218838; /* Button hover color */
        }
        .results {
            margin-top: 15px;
            font-weight: bold;
        }
    </style>
</head>
<body>

    <h1>CGPA Calculator</h1>

    <div id="semesters-container">
        <div class="semester" id="semester-1">
            <h3>1-1</h3>
            <table>
                <thead>
                    <tr>
                        <th>Subject</th>
                        <th>Credits</th>
                        <th>Grade</th>
                        <th>Action</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><input type="text" placeholder="Subject Name"></td>
                        <td><input type="number" min="0" max="18"></td>
                        <td>
                            <select>
                                <option value="10">A+</option>
                                <option value="9">A</option>
                                <option value="8">B</option>
                                <option value="7">C</option>
                                <option value="6">D</option>
                                <option value="5">E</option>
                                <option value="0">F</option>
                            </select>
                        </td>
                        <td><button onclick="removeSubject(this)">Remove</button></td>
                    </tr>
                </tbody>
            </table>
            <button onclick="addSubject(this)">Add Subject</button>
            <button onclick="calculateSemesterCGPA(this)">Calculate Semester CGPA</button>
            <div class="semester-results" id="semester-results-1"></div>
            <button onclick="removeSemester(this)">Remove Semester</button>
        </div>
    </div>

    <button id="add-semester-button" onclick="addSemester()">Add Semester</button>
    <button onclick="calculateTotalCGPA()">Calculate Total CGPA</button>
    <div class="results" id="total-results"></div>

    <script>
        let semesterCount = 1; // Track the number of semesters

        // Function to add a new semester
        function addSemester() {
            if (semesterCount < 8) {
                semesterCount++;
                const semestersContainer = document.getElementById('semesters-container');
                const newSemester = document.createElement('div');
                newSemester.classList.add('semester');
                newSemester.id = `semester-${semesterCount}`;
                
                // Determine semester name based on count
                const semesterName = `${Math.ceil(semesterCount / 2)}-${semesterCount % 2 === 0 ? 2 : 1}`;
                
                newSemester.innerHTML = `
                    <h3>${semesterName}</h3>
                    <table>
                        <thead>
                            <tr>
                                <th>Subject</th>
                                <th>Credits</th>
                                <th>Grade</th>
                                <th>Action</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><input type="text" placeholder="Subject Name"></td>
                                <td><input type="number" min="0" max="18"></td>
                                <td>
                                    <select>
                                        <option value="10">A+</option>
                                        <option value="9">A</option>
                                        <option value="8">B</option>
                                        <option value="7">C</option>
                                        <option value="6">D</option>
                                        <option value="5">E</option>
                                        <option value="0">F</option>
                                    </select>
                                </td>
                                <td><button onclick="removeSubject(this)">Remove</button></td>
                            </tr>
                        </tbody>
                    </table>
                    <button onclick="addSubject(this)">Add Subject</button>
                    <button onclick="calculateSemesterCGPA(this)">Calculate Semester CGPA</button>
                    <div class="semester-results" id="semester-results-${semesterCount}"></div>
                    <button onclick="removeSemester(this)">Remove Semester</button>
                `;
                semestersContainer.appendChild(newSemester);
                
                // Disable the add semester button if limit is reached
                if (semesterCount === 8) {
                    document.getElementById('add-semester-button').disabled = true;
                }
                saveData();
            }
        }

        // Function to remove a semester
        function removeSemester(button) {
            const semester = button.closest('.semester');
            semester.parentNode.removeChild(semester);
            semesterCount--;
            saveData();

            // Re-enable the add semester button if limit is not reached
            if (semesterCount < 8) {
                document.getElementById('add-semester-button').disabled = false;
            }
        }

        // Function to add subject row
        function addSubject(button) {
            const semester = button.closest('.semester');
            const tbody = semester.querySelector('tbody');
            const newRow = document.createElement('tr');
            newRow.innerHTML = `
                <td><input type="text" placeholder="Subject Name"></td>
                <td><input type="number" min="0" max="18"></td>
                <td>
                    <select>
                        <option value="10">A+</option>
                        <option value="9">A</option>
                        <option value="8">B</option>
                        <option value="7">C</option>
                        <option value="6">D</option>
                        <option value="5">E</option>
                        <option value="0">F</option>
                    </select>
                </td>
                <td><button onclick="removeSubject(this)">Remove</button></td>
            `;
            tbody.appendChild(newRow);
            saveData();
        }

        // Function to remove subject row
        function removeSubject(button) {
            const row = button.closest('tr');
            row.parentNode.removeChild(row);
            saveData();
        }

        // Function to calculate semester CGPA
        function calculateSemesterCGPA(button) {
            const semester = button.closest('.semester');
            const rows = semester.querySelectorAll('tbody tr');
            let semesterCredits = 0;
            let semesterPoints = 0;

            rows.forEach(row => {
                const credits = parseInt(row.querySelector('input[type="number"]').value) || 0;
                const grade = parseInt(row.querySelector('select').value) || 0;
                semesterCredits += credits;
                semesterPoints += credits * grade;
            });

            const semesterCGPA = semesterCredits > 0 ? (semesterPoints / semesterCredits).toFixed(2) : 0;
            const resultsDiv = semester.querySelector('.semester-results');
            resultsDiv.innerHTML = `Semester Credits: ${semesterCredits}, Semester CGPA: ${semesterCGPA}`;
            saveData();
        }

        // Function to calculate total CGPA
        function calculateTotalCGPA() {
            const semesters = document.querySelectorAll('.semester');
            let totalCredits = 0;
            let totalPoints = 0;

            semesters.forEach(semester => {
                const rows = semester.querySelectorAll('tbody tr');

                rows.forEach(row => {
                    const credits = parseInt(row.querySelector('input[type="number"]').value) || 0;
                    const grade = parseInt(row.querySelector('select').value) || 0;
                    totalCredits += credits;
                    totalPoints += credits * grade;
                });
            });

            const totalCGPA = totalCredits > 0 ? (totalPoints / totalCredits).toFixed(2) : 0;
            const totalPercentage = (totalCGPA * 10).toFixed(2); // Assuming 10 is the maximum for A+
            const resultsDiv = document.getElementById('total-results');
            resultsDiv.innerHTML = `Total Credits: ${totalCredits}, Total CGPA: ${totalCGPA}, Total Percentage: ${totalPercentage}%`;
            saveData();
        }

        // Function to save data to local storage
        function saveData() {
            const semestersData = [];
            const semesters = document.querySelectorAll('.semester');

            semesters.forEach((semester, index) => {
                const semesterObj = { subjects: [] };
                const rows = semester.querySelectorAll('tbody tr');

                rows.forEach(row => {
                    const subject = row.querySelector('input[type="text"]').value;
                    const credits = parseInt(row.querySelector('input[type="number"]').value) || 0;
                    const grade = row.querySelector('select').value;
                    semesterObj.subjects.push({ subject, credits, grade });
                });
                semestersData.push(semesterObj);
            });
            localStorage.setItem('semesters', JSON.stringify(semestersData));
        }

        // Function to load data from local storage
        function loadData() {
            const semestersData = JSON.parse(localStorage.getItem('semesters'));
            if (semestersData) {
                semestersData.forEach((semesterData, index) => {
                    if (index === 0) return; // Skip the first semester as it's already in the HTML
                    addSemester(); // Add new semester
                });
                semestersData.forEach((semesterData, index) => {
                    const semester = document.getElementById(`semester-${index + 1}`);
                    const tbody = semester.querySelector('tbody');
                    semesterData.subjects.forEach(subjectData => {
                        const newRow = document.createElement('tr');
                        newRow.innerHTML = `
                            <td><input type="text" value="${subjectData.subject}" placeholder="Subject Name"></td>
                            <td><input type="number" value="${subjectData.credits}" min="0" max="18"></td>
                            <td>
                                <select>
                                    <option value="10"${subjectData.grade === "10" ? ' selected' : ''}>A+</option>
                                    <option value="9"${subjectData.grade === "9" ? ' selected' : ''}>A</option>
                                    <option value="8"${subjectData.grade === "8" ? ' selected' : ''}>B</option>
                                    <option value="7"${subjectData.grade === "7" ? ' selected' : ''}>C</option>
                                    <option value="6"${subjectData.grade === "6" ? ' selected' : ''}>D</option>
                                    <option value="5"${subjectData.grade === "5" ? ' selected' : ''}>E</option>
                                    <option value="0"${subjectData.grade === "0" ? ' selected' : ''}>F</option>
                                </select>
                            </td>
                            <td><button onclick="removeSubject(this)">Remove</button></td>
                        `;
                        tbody.appendChild(newRow);
                    });
                });
            }
        }

        // Load data when the page is loaded
        window.onload = loadData;
    </script>
</body>
</html>
